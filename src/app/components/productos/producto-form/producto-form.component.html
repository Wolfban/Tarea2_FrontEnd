<form (ngSubmit)="handleAction(frm)" autocomplete="off" #frm="ngForm" class="add-producto-container">
    <h3 class="mb-5 px-5">{{title}}</h3>
    <div class="border-bottom pb-3 mb-3 px-5">
      <div class="row">
        <div class="col-6">
          <label for="nombre" class="form-label mb-2">
            Name
          </label>
          <input #nombre="ngModel" type="text" class="form-control" id="nombre" name="nombre" 
            placeholder="Xbox"
            [(ngModel)]="producto.nombre" 
            [ngClass]="{ 
              'is-invalid': nombre.invalid && nombre.touched,
              'is-valid': nombre.valid && nombre.touched
            }" 
            required 
          />
          @if (nombre.invalid) {
            <div *ngIf="nombre.invalid" class="invalid-feedback">
              Please add a valid name
            </div>
          }
        </div>
        <div class="col-6">
          <label for="descripcion" class="form-label mb-2">
            Descripcion
          </label>
          <input #descripcion="ngModel" type="text" class="form-control" id="descripcion" 
            name="descripcion" 
            placeholder="Descripcion"
            [(ngModel)]="producto.descripcion" 
            [ngClass]="{ 
              'is-invalid': descripcion.invalid && descripcion.touched,
              'is-valid': descripcion.valid && descripcion.touched
            }" 
            required 
          />
          @if (descripcion.invalid) {
            <div *ngIf="descripcion.invalid" class="invalid-feedback">
              Please add a valid lastname
            </div>
          }
        </div>
        <div class="col-6">
          <label for="cantidadEnStock" class="form-label mb-2">
            Cantidad en Stock
          </label>
          <input #cantidadEnStock="ngModel" type="number" class="form-control" id="cantidadEnStock" 
            name="cantidadEnStock" 
            placeholder="Cantidad En Stock"
            [(ngModel)]="producto.cantidadEnStock" 
            [ngClass]="{ 
              'is-invalid': cantidadEnStock.invalid && cantidadEnStock.touched,
              'is-valid': cantidadEnStock.valid && cantidadEnStock.touched
            }" 
            required 
          />
          @if (cantidadEnStock.invalid) {
            <div *ngIf="cantidadEnStock.invalid" class="invalid-feedback">
              Please add a valid stock number
            </div>
          }
        </div>
        <div class="col-6">
          <label for="precio" class="form-label mb-2">
            Precio
          </label>
          <input #precio="ngModel" type="number" class="form-control" id="precio" 
            name="precio" 
            placeholder="Precio"
            [(ngModel)]="producto.precio" 
            [ngClass]="{ 
              'is-invalid': precio.invalid && precio.touched,
              'is-valid': precio.valid && precio.touched
            }" 
            required 
          />
          @if (precio.invalid) {
            <div *ngIf="precio.invalid" class="invalid-feedback">
              Please add a valid cost
            </div>
          }
        </div>
        <div class="col-6">
          <label for="categoria" class="form-label mb-2">
            Categoria
          </label>
          <select id="categoria" [(ngModel)]="producto.categoria.id" name="categoria" required>
            <option *ngFor="let categoria of categorias" [value]="categoria.id">{{ categoria.nombre }}</option>
          </select>
          
        </div>
        
      </div>
    </div>
    <div class="pb-3 mb-3 d-flex justify-content-center align-items-center">
      <button
        type="submit"
        class="btn btn-primary d-flex align-items-center">
        <i class="fa-solid white me-2"
          [ngClass]="{'fa-plus': action == 'add', 'fa-pencil':  action == 'edit'}"
        ></i>
        <p class="mb-0"> {{title}} </p>
      </button>
    </div>
    <div class="d-flex justify-content-center align-items-center">
      @if(feedbackMessage.message) {
        <p class="pb-0" [ngClass]="{
          'text-danger': feedbackMessage.type == 'ERROR',
          'text-success': feedbackMessage.type == 'SUCCESS'
          }">{{feedbackMessage.message}}</p>
      }
    </div>
  </form>